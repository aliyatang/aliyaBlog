---
layout: default
---

<!-- Load YML data -->
{% assign units = page.units | split: ',' %}
<h1>{{page.title}}</h1>

{%comment%} 
Load all posts with site
{%endcomment%}

{% assign posts = null | compact %}
{% assign posts = posts | concat:site.posts | concat:site.pages %}

<!-- Iterate through Units -->
{% for unit in units %}
{% assign unitData = site.data[unit] %}
<h2>
  Unit: {{ unit }}
</h2>

{% assign start = unitData.start %}
{% assign end = unitData.end %}

<!-- Output Column Headings for Blogs -->
<table>
  <tr>
    <th>Week</th>
    <th>Code, Code, Code</th>
    <th>Tools and DevOps</th>
    <th>Collaboration</th>
  </tr>

  {%comment%} 
  These loops group blogs according to Row (week) and Column (category) 
  units = empty array
  sym = value to be used as a separator
  deli = sym forced to array
  {%endcomment%}

  {% assign units = null | compact %}  
  {% assign sym = "|||" %} 
  {% assign deli = sym | compact %} 

  {% for index in (start..end) -%}
    {% assign ccc = null | compact %}
    {% assign toolsdev = null | compact %}
    {% assign collab = null | compact %}

    {%comment%} 
    looping through all posts
    {%endcomment%}

    {% for post in posts %}
      {% if post.week %}
        {% assign week = post.week %}
        {% assign title = post.title | compact %}
        {% assign url = post.url | compact %}
        {{ week }}
  
        {%comment%} 
        process posts for current week
        {%endcomment%}
        {% if week == index %} 

        {%comment%} 
        organizing blogs by type
        {%endcomment%}
        {% if post.type == "ccc" %} 
            {% assign ccc = ccc | unshift: title %}
            {% assign ccc = ccc | unshift: url %}
        {% elsif post.type == "toolsdev" %}
            {% assign toolsdev = toolsdev | unshift: title %}
            {% assign toolsdev = toolsdev | unshift: url %} 
        {% elsif post.type == "collab" %}
            {% assign collab = collab | unshift: title %}
            {% assign collab = collab | unshift: url %} 
        {% else %}
            {% assign uk = uk | unshift: title %}
            {% assign uk = uk | unshift: url %}     
        {% endif %}

      {% endif %}
    {% endfor %}

    {%comment%} 
    ordering units and inserting column delimiters
    {%endcomment%}
    {% assign units = units | concat:ccc | concat:deli | concat:toolsdev | concat:deli | concat:collab  %}

    {%comment%} 
    This Loop is maximum iterations, since elements are pairs it will decrement an extra time at the end
    {%endcomment%}
    <tr>
    <td> {{ index }} </td> 
    <td>
    {% for i in (0..units.size) -%} 
        {% if units.size == 0 %}
        {% break %}
        {% elsif units[0] == sym %} <!-- make new column -->
    </td>
    <td>
        {% assign units = units | shift %} <!-- remove delimiter -->
        {% else %} <!-- make a link in the column -->
        - <a href="{{site.baseurl}}/{{units[0]}}">{{units[1]}}</a> <br/> 
        {% assign units = units | shift | shift %} <!-- remove title and url -->
        {% endif %}
    {% endfor %}
    </td>
    </tr>
  {% endfor %}
</table>
{% endfor %}
